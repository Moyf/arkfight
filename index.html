<!doctype html>
<html>

    <link rel="stylesheet" href="github.css">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    
	<head>
		<meta charset="utf-8">
		<title>å¹²å‘˜å•æŒ‘ç³»ç»Ÿ</title>
        <script src="https://cdn.jsdelivr.net/npm/vue" type="text/javascript" charset="utf-8"></script>
	</head>

	<body onload="draw('blood1');draw('blood2');">
        <div id="face">
            <span title="ä½ ä»¬ä¸æ˜¯å–œæ¬¢è®©å¹²å‘˜å•æŒ‘äº’ç›¸å€¼ç­å—ï¼Ÿæ¥å•Šï¼Œå€¼ä¸ªç—›ï¼">
                <h1>å¹²å‘˜å•æŒ‘ç³»ç»Ÿ v0.15</h1>
            </span>
            <p><b>v0.1</b><br>* Init: åˆå§‹ç‰ˆæœ¬ï¼šæ”¯æŒä¸¤ä¸ªçº¯ç‰©ç†å¹²å‘˜è¿›è¡Œä½ ä¸€åˆ€æˆ‘ä¸€åˆ€çš„äº’ç ï¼Œæš‚æœªè€ƒè™‘æ”»å‡»é—´éš”</p>
            
            <p><b>v0.15</b><br>* Update: ä½¿ç”¨ setInterval å‡½æ•°æ¥å®ç°æ”»å‡»äº†é—´éš”çš„è®¡ç®—ï¼ˆå­˜åœ¨å¾®å°è¯¯å·®ï¼Œå¯èƒ½å¯¼è‡´æŸå¹²å‘˜æ­»äº†ä¹‹åè¿˜èƒ½å¤šç ä¸€ä¸¤åˆ€ï¼Œä¸å½±å“ç»“æœï¼‰
            <br>* New: å¢åŠ äº†ä¸¤ä¸ªå°å›¾æ ‡ï¼Œæé«˜è¾¨è¯†åº¦</p>
            
            <p><b>v0.2</b><br>* New: ç»˜åˆ¶çŸ©å½¢ä»¥å®ç°è¡€æ¡çš„æ˜¾ç¤º
		<br>* Fixï¼šä¿®å¤äº†æ­»åå¯èƒ½å¤šç ä¸€åˆ€çš„é—®é¢˜ï¼ŒåŒæ—¶æŠŠè´Ÿå€¼HPä¿®æ­£ä¸º0</p>
		
		<p>å¥½å•¦å¥½å•¦ï¼Œè¿™ä¸ªå…¶å®å°±æ˜¯åšç€ç©å„¿çš„~<br>çº¯å±å¨±ä¹ï¼Œåˆ«çœŸçš„ä¸Šå¤´å€¼ç­å™¢  (ï¿£â–½ï¿£)ãƒ</p>
        </div>
        
        <hr>
        
        <div id="app">
            <h2>æ•°æ®è®¾ç½®</h2>
            
            <div>
                
                <h3>å¹²å‘˜1 {{ char_1.name }}</h3>
                åç§°ï¼š<input v-model="char_1.name"><br>
                æ€»è¡€é‡ï¼š<input v-model="char_1.hp_max"><br>
                æ”»å‡»åŠ›ï¼š<input v-model="char_1.atk"><br>
                é˜²å¾¡åŠ›ï¼š<input v-model="char_1.def"><br>
                æ”»å‡»é—´éš”ï¼š<input v-model="char_1.atk_invl"><br>
            </div>
            
            <div>
                <h3>å¹²å‘˜2 {{ char_2.name }}</h3>
                åç§°ï¼š<input v-model="char_2.name"><br>
                æ€»è¡€é‡ï¼š<input v-model="char_2.hp_max"><br>
                æ”»å‡»åŠ›ï¼š<input v-model="char_2.atk"><br>
                é˜²å¾¡åŠ›ï¼š<input v-model="char_2.def"><br>
                æ”»å‡»é—´éš”ï¼š<input v-model="char_2.atk_invl"><br>
            </div>
            <br>
            <button v-on:click="startBattle">å¼€å§‹æˆ˜æ–—ï¼</button>
            
            <hr>
            <h2>å®æ—¶æ•°æ®</h2>
            <table border="1">
                <tr>
                    <th>å±æ€§</td>
                    <th>å¹²å‘˜1 {{char_1.name}}</td>
                    <th>å¹²å‘˜2 {{char_2.name}}</td>
                </tr>
                <tr>
                    <td>è¡€é‡</td>
                    <td><canvas id="blood1" width="100" height="10">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒH5 canvaså±æ€§</canvas><br>{{char_1.hp}} / {{ char_1.hp_max }}</td>
                    <td><canvas id="blood2" width="100" height="10">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒH5 canvaså±æ€§</canvas><br>{{char_2.hp}} / {{ char_2.hp_max }}</td>
                    
                </tr>
                <tr>
                    <td>æ”»å‡»åŠ›</td>
                    <td>{{char_1.atk}}</td>
                    <td>{{char_2.atk}}</td>
                </tr>
                <tr>
                    <td>é˜²å¾¡åŠ›</td>
                    <td>{{char_1.def}}</td>
                    <td>{{char_2.def}}</td>
                </tr>
                <tr>
                    <td>æ”»å‡»é—´éš”</td>
                    <td>{{char_1.atk_invl}}</td>
                    <td>{{char_2.atk_invl}}</td>
                </tr>
            </table>
            
            <p>{{ result }}</p>
            
            
            <hr>
            
            <h2>æˆ˜æ–—è®°å½•</h2>
            <p>è®¡æ—¶ï¼š{{ timer }}</p>
            <p v-html="log"></p>
            
            <hr>
            
            <p>Author: Moy</p>

        </div>
        
        <script>
            function draw(id) {
                var canvas = document.getElementById(id);
                
                if (canvas == null){
                    return false;
                }
                
                var context = canvas.getContext('2d');
                // context.fillStyle = "darkred";
                // context.fillRect(0, 0, 200, 6);
                context.fillStyle = "red";
                context.fillRect(0, 0, 100, 6);
                
                // var canvas = document.getElementById(id);
                // 
                // if (canvas == null){
                //     return false;
                // }
                // 
                // var context = canvas.getContext('2d');
                // context.fillStyle = "eeefff";
                // context.fillRect(0, 0, 200, 5);
                // context.fillStyle = "green";
                // context.strokeStyle = "red";
                // context.lineWidth = 1;
                // context.fillRect(50, 50, 100, 100);
                // context.strokeRect(50, 50, 100, 100);
                
            }
        </script>
        
        <script type="text/javascript">
            var data = {
                title: ':)',
                message: 'Hello, Vue!',
                author: "Moy",
                
                char_1 : {
                    name : "æ–¯å¡è’‚",
                    hp_max : 3665,
                    hp : 3665,
                    atk : 933,
                    def : 263,
                    atk_invl : 1.5,
                    
                },
                
                char_2 : {
                    name : "èµ«æ‹‰æ ¼",
                    hp_max : 3825,
                    hp : 3825,
                    atk : 762,
                    def : 334,
                    atk_invl : 1.2,
                },
                
                log : "[æˆ˜æ–—ä¸€è§¦å³å‘]",
                timer : 0,
                isBattling : true,
                winner : "[èƒœè´Ÿæœªå®š]",
                result : "æ•¬è¯·æœŸå¾…ç»“æœâ€¦â€¦",
                
            };
            
            var methods = {
                    drawBlood : function(id, percent) {
                        var canvas = document.getElementById(id);
                        
                        if (canvas == null){
                            return false;
                        }
                        
                        var context = canvas.getContext('2d');
                        context.fillStyle = "darkred";
                        context.fillRect(0, 0, 100, 6);
                        context.fillStyle = "red";
                        context.fillRect(0, 0, percent * 100, 6);
                        
                    },
                    
                    // å·¦å‘å³è¿›æ”»
                    attack1to2 : function() {
                        if (this.isBattling){
                        
                        var dmg1 = this.char_1.atk - this.char_2.def;
                        
                        // æŠ›å…‰
                        if (dmg1 < this.char_1.atk * 0.05) {
                            dmg1 = this.char_1.atk * 0.05;
                        }
                        
                        if (this.char_2.hp - dmg1 < 0) {
                            this.char_2.hp = 0;
                        } else {
                            this.char_2.hp -= dmg1;
                        }
                        
                        this.log += `>> ğŸ¬ ${this.char_1.name} å¯¹ ${this.char_2.name} é€ æˆäº† ${dmg1} ç‚¹ä¼¤å®³`;
                        this.log += `<br>    ${this.char_2.name} å‰©ä½™è¡€é‡: ${this.char_2.hp} <br><br>`;
                        
                        this.drawBlood('blood2', this.char_2.hp / this.char_2.hp_max)
                        
                        // this.log += `>> ${this.char_1.name} å½“å‰å‰©ä½™è¡€é‡ï¼š${this.char_1.hp}<br>`;
                        // this.log += `>> ${this.char_2.name} å½“å‰å‰©ä½™è¡€é‡ï¼š${this.char_2.hp}<br>---<br>`;
                        
                        if (this.char_2.hp <= 0) {
                            this.winner = this.char_1.name;
                            this.result = `ğŸ¬ èƒœåˆ©è€…ï¼š${this.winner}`;
                            
                            this.isBattling = false;
                            
                            // alert(`ğŸ¬ ${this.char_1.name} è·å¾—äº†æœ€ç»ˆèƒœåˆ©ï¼`);
                            
                        }
                        }
                    },
                    
                    // å³å‘å·¦è¿›æ”»
                    attack2to1 : function() {
                        if (this.isBattling){
                        
                        var dmg2 = this.char_2.atk - this.char_1.def;
                        
                        // æŠ›å…‰
                        if (dmg2 < this.char_2.atk * 0.05) {
                            dmg2 = this.char_2.atk * 0.05;
                        }
                        
                        if (this.char_1.hp - dmg2 < 0) {
                            this.char_1.hp = 0;
                        } else {
                            this.char_1.hp -= dmg2;
                        }
                        
                        
                        this.drawBlood('blood1', this.char_1.hp / this.char_1.hp_max)
                        
                        this.log += `<< ğŸ¦… ${this.char_2.name} å¯¹ ${this.char_1.name} é€ æˆäº† ${dmg2} ç‚¹ä¼¤å®³`;
                        this.log += `<br>    ${this.char_1.name} å‰©ä½™è¡€é‡: ${this.char_1.hp} <br><br>`;
                        
                        // this.log += `<< ${this.char_1.name} å½“å‰å‰©ä½™è¡€é‡ï¼š${this.char_1.hp}<br>`;
                        // this.log += `<< ${this.char_2.name} å½“å‰å‰©ä½™è¡€é‡ï¼š${this.char_2.hp}<br>---<br>`;
                        
                        if (this.char_1.hp <= 0) {
                            this.winner = this.char_2.name;
                            this.result = `ğŸ¦… èƒœåˆ©è€…ï¼š${this.winner}`;
                            
                            this.isBattling = false;
                            
                            // alert(`ğŸ¦… ${this.char_2.name} è·å¾—äº†æœ€ç»ˆèƒœåˆ©ï¼`);
                        }
                        }
                    },
                    
                    timerCount : function () {
                        this.timer += 0.1;
                    },
                    
                
                    startBattle: function () {
                        
                        this.char_1.hp = this.char_1.hp_max;
                        this.char_2.hp = this.char_2.hp_max;
                        
                        this.log = "[å¼€å§‹æˆ˜æ–—ï¼]<br>";                  
                        
                        // è®¡æ—¶å™¨
                        var intervalCount = setInterval( () => {
                            
                            this.timerCount();
                            
                            if (this.isBattling == false) {
                                clearInterval(intervalCount);
                            }
                            
                            
                        }, 100);
                        
                        
                        // å‰è€…çš„æ”»å‡»è®¡ç®—
                        var interval1 = setInterval( () => {
                            
                            this.attack1to2();
                            
                            if (this.isBattling == false) {
                                clearInterval(interval1);
                            }
                            
                            
                        }, this.char_1.atk_invl * 1000);
                        
                        
                        // åè€…çš„æ”»å‡»è®¡ç®—
                        var interval2 = setInterval( () => {
                            
                            this.attack2to1()
                            
                            if (this.isBattling == false) {
                                clearInterval(interval2);
                            }
                            
                            
                        }, this.char_2.atk_invl * 1000);
                        
                        
                    }
            };
            
            var vm = new Vue({
                el: '#app',
                data: data,
                methods: methods,
            });
            
            
        </script>
	</body>

</html>
