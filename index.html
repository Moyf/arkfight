<!doctype html>
<html>

    <link rel="stylesheet" href="github.css">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    
	<head>
		<meta charset="utf-8">
		<title>æ˜æ—¥æ–¹èˆŸ|å¹²å‘˜å•æŒ‘ç³»ç»Ÿ</title>
        <script src="https://cdn.jsdelivr.net/npm/vue" type="text/javascript" charset="utf-8"></script>
	</head>

	<body onload="draw('blood1');draw('blood2');">
        <div id="face">
            <span title="ä½ ä»¬ä¸æ˜¯å–œæ¬¢è®©å¹²å‘˜å•æŒ‘äº’ç›¸å€¼ç­å—ï¼Ÿæ¥å•Šï¼Œå€¼ä¸ªç—›ï¼">
                <h1>æ˜æ—¥æ–¹èˆŸ|å¹²å‘˜å•æŒ‘ç³»ç»Ÿ v0.5</h1>
            </span>		
		
		<p>Made by Moy</p>
        </div>
        
        <hr>
        
        <div id="app">
            <h3>æ•°æ®è®¾ç½®</h3>
            ç›´æ¥å°†å¯¹åº”è§’è‰²çš„æ•°æ®å¡«å…¥ä¸‹æ–¹å³å¯ï¼Œä¹Ÿå¯ä»¥ä»ä¸‹æ‹‰é€‰æ¡†å¿«é€Ÿé€‰æ‹©å…­æ˜Ÿå¹²å‘˜ã€‚
            å¦‚æœæœ‰æŒç»­æ€§å¢ä¼¤ä¸€ç±»çš„æŠ€èƒ½ï¼Œå¯ç›´æ¥å°†è®¡ç®—åçš„æ•°å€¼å¡«å…¥ï¼ˆæ½œèƒ½åŒç†ï¼‰ã€‚
            
            <div>
                
                <h4>è§’è‰²1 {{ char_1.name }}</h4>
                å¿«é€Ÿé€‰æ‹©
                <select v-model="selected1" v-on:change="selectChar1">
                    <option v-for="char in chars" v-bind:value="char.value">{{char.text}}</option>
                </select><br>
                
                åç§°ï¼š<input v-model="char_1.name"><br>
                æ€»è¡€é‡ï¼š<input v-model="max_hp_1"><br>
                æ”»å‡»åŠ›ï¼š<input v-model="char_1.atk"><br>
                é˜²å¾¡åŠ›ï¼š<input v-model="char_1.def"><br>
                æ³•æœ¯æŠ—æ€§ï¼š<input v-model="char_1.mgc_def"><br>
                æ”»å‡»é—´éš”ï¼š<input v-model="char_1.atk_invl"><br>
                æ”»å‡»ç±»å‹ï¼š
                <input type="radio" id="type1phy" value="physic" v-model="char_1.type">
                <label for="type1phy">ç‰©ç†</label>
                <input type="radio" id="type1mgc" value="magic" v-model="char_1.type">
                <label for="type1mgc">æ³•æœ¯</label>
                <input type="radio" id="type1med" value="medic" v-model="char_1.type">
                <label for="type1med">æ²»ç–—</label>
                <br>
            </div>
            
            <div>
                <h4>è§’è‰²2 {{ char_2.name }}</h4>
                å¿«é€Ÿé€‰æ‹©
                <select v-model="selected2" v-on:change="selectChar2">
                    <option v-for="char in chars" v-bind:value="char.value">{{char.text}}</option>
                </select><br>
                
                åç§°ï¼š<input v-model="char_2.name"><br>
                æ€»è¡€é‡ï¼š<input v-model="max_hp_2"><br>
                æ”»å‡»åŠ›ï¼š<input v-model="char_2.atk"><br>
                é˜²å¾¡åŠ›ï¼š<input v-model="char_2.def"><br>
                æ³•æœ¯æŠ—æ€§ï¼š<input v-model="char_2.mgc_def"><br>
                æ”»å‡»é—´éš”ï¼š<input v-model="char_2.atk_invl"><br>
                æ”»å‡»ç±»å‹ï¼š
                <input type="radio" id="type2phy" value="physic" v-model="char_2.type">
                <label for="type2phy">ç‰©ç†</label>
                <input type="radio" id="type2mgc" value="magic" v-model="char_2.type">
                <label for="type2mgc">æ³•æœ¯</label>
                <input type="radio" id="type2med" value="medic" v-model="char_2.type">
                <label for="type2med">æ²»ç–—</label>
                <br>
            </div>
            <br>
            <button v-on:click="startBattle" style="height:60px;width:120px;">å¼€å§‹æˆ˜æ–—ï¼</button>
            
            <hr>
            <h3>å®æ—¶æ•°æ®</h3>
            <table border="1">
                <tr>
                    <th>å±æ€§</td>
                    <th>{{char_1.icon}}{{char_1.name}}</td>
                    <th>{{char_2.icon}}{{char_2.name}}</td>
                </tr>
                <tr>
                    <td>è¡€é‡</td>
                    <!-- <td><canvas id="blood1" width="100" height="10">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒH5 canvaså±æ€§</canvas><br>{{char_1.hp}} / {{ char_1.max_hp }}</td>
                    <td><canvas id="blood2" width="100" height="10">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒH5 canvaså±æ€§</canvas><br>{{char_2.hp}} / {{ char_2.max_hp }}</td> -->
                    <td><canvas id="blood1" width="100" height="10">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒH5 canvaså±æ€§</canvas><br>{{ char_1.hp | rounding0 }} / {{ max_hp_1 }}</td>
                    <td><canvas id="blood2" width="100" height="10">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒH5 canvaså±æ€§</canvas><br>{{ char_2.hp | rounding0 }} / {{ max_hp_2 }}</td>
                    
                </tr>
                <tr>
                    <td>æ”»å‡»åŠ›</td>
                    <td>{{char_1.atk}}</td>
                    <td>{{char_2.atk}}</td>
                </tr>
                <tr>
                    <td>æ”»å‡»ç±»å‹</td>
                    <td>{{char_1.type}}</td>
                    <td>{{char_2.type}}</td>
                </tr>
                <tr>
                    <td>é˜²å¾¡åŠ›</td>
                    <td>{{char_1.def}}</td>
                    <td>{{char_2.def}}</td>
                </tr>
                <tr>
                    <td>æ³•æœ¯æŠ—æ€§</td>
                    <td>{{char_1.mgc_def}}</td>
                    <td>{{char_2.mgc_def}}</td>
                </tr>
                <tr>
                    <td>æ”»å‡»é—´éš”</td>
                    <td>{{char_1.atk_invl}}</td>
                    <td>{{char_2.atk_invl}}</td>
                </tr>
            </table>
            
            <p>{{ result }}</p>
            
            
            <hr>
            
            <h3>æˆ˜æ–—è®°å½•</h3>
            <p>è®¡æ—¶ï¼š{{ timer | rounding1 }}</p>
            <p v-html="log"></p>
            
            <hr>
            
            <div id="devlog" height="300">
            <h3>æ›´æ–°æ—¥å¿—</h3>
            <p><b>v0.1</b><br>* Init: åˆå§‹ç‰ˆæœ¬ï¼šæ”¯æŒä¸¤ä¸ªçº¯ç‰©ç†å¹²å‘˜è¿›è¡Œä½ ä¸€åˆ€æˆ‘ä¸€åˆ€çš„äº’ç ï¼Œæš‚æœªè€ƒè™‘æ”»å‡»é—´éš”</p>
            
            <p><b>v0.15</b><br>* Update: ä½¿ç”¨ setInterval å‡½æ•°æ¥å®ç°æ”»å‡»äº†é—´éš”çš„è®¡ç®—ï¼ˆå­˜åœ¨å¾®å°è¯¯å·®ï¼Œå¯èƒ½å¯¼è‡´æŸå¹²å‘˜æ­»äº†ä¹‹åè¿˜èƒ½å¤šç ä¸€ä¸¤åˆ€ï¼Œä¸å½±å“ç»“æœï¼‰
            <br>+ New: å¢åŠ äº†ä¸¤ä¸ªå°å›¾æ ‡ï¼Œæé«˜è¾¨è¯†åº¦</p>
            
            <p><b>v0.2</b><br>* New: ç»˜åˆ¶çŸ©å½¢ä»¥å®ç°è¡€æ¡çš„æ˜¾ç¤º
            <br>* Fixï¼šä¿®å¤äº†æ­»åå¯èƒ½å¤šç ä¸€åˆ€çš„é—®é¢˜ï¼ŒåŒæ—¶æŠŠè´Ÿå€¼HPä¿®æ­£ä¸º0</p>
		
		
            <p><b>v0.3</b><br>* Update: å¯¹æˆ˜æ–—æŒ‰é’®åšäº†ä¼˜åŒ–ï¼Œå¯ä»¥ç›´æ¥é‡å¤æŒ‰é”®æ¥æ‰§è¡Œæ–°ä¸€è½®æˆ˜æ–—</p>
            <p><b>v0.35</b><br>* Update: å°†é»˜è®¤æ•°æ®ä¿®æ”¹ä¸ºè®¡ç®—ä¿¡èµ–åŠ æˆåçš„æ•°å€¼</p>
            <p><b>v0.36</b><br>* Update: å°†æ›´æ–°æ—¥å¿—ç§»åˆ°é¡µé¢æœ€ä¸‹ç«¯ï¼›ä¼˜åŒ–äº†é¡µé¢æ˜¾ç¤ºæ•ˆæœ</p>
            <p><b>v0.37</b><br>+ New: ä½¿ç”¨ Watch åŠŸèƒ½ï¼Œåœ¨æ€»è¡€é‡å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼ŒåŒæ­¥è°ƒæ•´å½“å‰è¡€é‡</p>
            
            <p><b>v0.5 å¤§å¹…åº¦æ›´æ–°ï¼</b>
            <br>+ New: å¢åŠ äº†é¢„è®¾å¹²å‘˜é€‰æ‹©æ¡†ï¼Œå¯ä»¥å¿«é€Ÿé€‰å–å…­æ˜Ÿå¹²å‘˜åŠç‰¹æ®Šæ€ªç‰©çš„æ•°æ®ï¼ˆå‡ä¸ºLV1åˆå§‹å€¼ï¼‰
            <br>+ New: ä¸ºæ‰€æœ‰å…­æ˜Ÿå¹²å‘˜æ·»åŠ äº†ä¸“å±å°å›¾æ ‡
            <br>+ New: æ”¯æŒç‰©ç†ã€æ³•æœ¯ã€æ²»ç–—ä¸‰ç§å¯é€‰æ”»å‡»ç±»å‹ï¼Œç°åœ¨å¯ä»¥è®¡ç®—æ³•æœ¯ä¼¤å®³ï¼Œæˆ–æ˜¯å¯¹è‡ªå·±è¿›è¡Œæ²»ç–—
            <br>* Update: ä¼˜åŒ–äº†æ•°å­—çš„æ˜¾ç¤º
            
            </p>
            
            </div>
            
            <hr>
            <p>Author: Moy</p>

        </div>
        
        <script>
            function draw(id) {
                var canvas = document.getElementById(id);
                
                if (canvas == null){
                    return false;
                }
                
                var context = canvas.getContext('2d');
                
                context.fillStyle = "red";
                context.fillRect(0, 0, 100, 6);
                
            }
        </script>
        
        <script type="text/javascript">
            var data = {
                title: ':)',
                message: 'Hello, Vue!',
                author: "Moy",
                
                char_1 : {
                    name : "æ»¡çº§èƒ½å¤©ä½¿",
                    max_hp : 1673,
                    hp : 1673,
                    atk : 630,
                    def : 161,
                    mgc_def : 0,
                    atk_invl : 1,
                    type : "physic",
                    icon : "ğŸ¥§",
                },
                
                char_2 : {
                    name : "é‡è£…é˜²å¾¡ç»„é•¿",
                    max_hp : 10000,
                    hp : 10000,
                    atk : 600,
                    def : 1000,
                    mgc_def: 0,
                    atk_invl : 2.6,
                    type: "physic",
                    icon : "ğŸ‘¤",
                },
                
                log : "[æˆ˜æ–—ä¸€è§¦å³å‘]",
                timer : 0,
                isBattling : true,
                winner : "[èƒœè´Ÿæœªå®š]",
                result : "æ•¬è¯·æœŸå¾…ç»“æœâ€¦â€¦",
                
                max_hp_1 : 3665,
                max_hp_2 : 4225,
                
                sel_1 : "æ–¯å¡è’‚",
                sel_2 : "èµ«æ‹‰æ ¼",
                
                selected1 : '',
                selected2 : '',
                
                type1 : '',
                type2 : '',
                
                chars : [
                    {text:'æ–¯å¡è’‚', value:'skadi'}, 
                    {text:'èµ«æ‹‰æ ¼', value:'hellagur'}, 
                    
                    {text:'è‰¾é›…æ³•æ‹‰', value:'eyjafjalla'},
                    {text:'å®‰æ´è‰å¨œ', value:'angelina'},
                    {text:'é™ˆ', value:'chen'},
                    {text:'é»‘', value:'schwarz'},
                    {text:'èƒ½å¤©ä½¿', value:'exusiai'},
                    {text:'å¡é›·å¨…', value:'saria'},
                    {text:'é—ªçµ', value:'shining'},
                    {text:'æ¨è¿›ä¹‹ç‹', value:'siege'},
                    {text:'æ˜Ÿç†Š', value:'hoshiguma'},
                    {text:'å¤œèº', value:'nightingale'},
                    {text:'ä¼ŠèŠ™åˆ©ç‰¹', value:'ifrit'},
                    {text:'é“¶ç°', value:'silverash'},

                    {text:'--è‡ªå®šä¹‰--', value:'custom'},
                    
                    
                    {text:'[é‡è£…é˜²å¾¡ç»„é•¿]', value:'enemy_high_def'},
                    {text:'[æœ¯å£«ç»„é•¿]', value:'enemy_wizard'},
                    
                    ],
                
                info_format : {name:"name", max_hp:"max_hp", atk:"atk", def:"def", mgc_def:"mgc_def", 
                    atk_invl:"atk_invl", type : "type", icon: "icon"}, 
                
                // char_info_skadi : {
                //     name : "æ–¯å¡è’‚",
                //     max_hp : 3665,
                //     atk : 1013,
                //     def : 303,
                //     atk_invl : 1.5,
                // },
                // 
                // char_info_hellagur : {
                //     name : "èµ«æ‹‰æ ¼",
                //     max_hp : 4225,
                //     atk : 832,
                //     def : 334,
                //     atk_invl : 1.2,
                // },
                
                char_info_custom : {
                    name : "Moy",
                    max_hp : 1,
                    atk : 1,
                    def : 1,
                    mgc_def: 90,
                    atk_invl : 1,
                    type: "physic",
                    icon : "ğŸ˜†",
                },
                
                
                char_info_eyjafjalla : {
                    name : "è‰¾é›…æ³•æ‹‰",
                    max_hp : 732,
                    atk: 292,
                    def: 46,
                    mgc_def: 10,
                    atk_invl: 1.6,
                    type: "magic",
                    icon: "ğŸ’¥",
                },
                
                char_info_angelina : {
                    name : "å®‰æ´è‰å¨œ",
                    max_hp : 629,
                    atk: 228,
                    def: 53,
                    mgc_def: 15,
                    atk_invl: 1.9,
                    type: "magic",
                    icon: "ğŸ¦Š",
                },
                
                char_info_chen : {
                    name : "é™ˆ",
                    max_hp : 1229,
                    atk: 249,
                    def: 154,
                    mgc_def: 0,
                    atk_invl: 1.3,
                    type: "physic",
                    icon: "ğŸ²",
                },
                
                char_info_hellagur : {
                    name : "èµ«æ‹‰æ ¼",
                    max_hp : 1568,
                    atk: 340,
                    def: 160,
                    mgc_def: 0,
                    atk_invl: 1.2,
                    type: "physic",
                    icon: "ğŸ¦…",
                },
                
                char_info_schwarz : {
                    name : "é»‘",
                    max_hp : 781,
                    atk: 357,
                    def: 86,
                    mgc_def: 0,
                    atk_invl: 1.6,
                    type: "physic",
                    icon: "ğŸ±â€ğŸ‘¤",
                },
                
                char_info_exusiai : {
                    name : "èƒ½å¤©ä½¿",
                    max_hp : 711,
                    atk: 183,
                    def: 57,
                    mgc_def: 0,
                    atk_invl: 1,
                    type: "physic",
                    icon: "ğŸ¥§",
                },
                
                char_info_saria : {
                    name : "å¡é›·å¨…",
                    max_hp : 1309,
                    atk: 200,
                    def: 248,
                    mgc_def: 10,
                    atk_invl: 1.2,
                    type: "physic",
                    icon: "ğŸ’",
                },
                
                char_info_shining : {
                    name : "é—ªçµ",
                    max_hp : 854,
                    atk: 180,
                    def: 60,
                    mgc_def: 0,
                    atk_invl: 2.85,
                    type: "medic",
                    icon: "âœ¨",
                },
                
                char_info_skadi : {
                    name : "æ–¯å¡è’‚",
                    max_hp : 1442,
                    atk: 415,
                    def: 116,
                    mgc_def: 0,
                    atk_invl: 1.5,
                    type: "physic",
                    icon: "ğŸ¬",
                },
                
                char_info_siege : {
                    name : "æ¨è¿›ä¹‹ç‹",
                    max_hp : 911,
                    atk: 212,
                    def: 154,
                    mgc_def: 0,
                    atk_invl: 1.05,
                    type: "physic",
                    icon: "ğŸ¦",
                },
                
                char_info_hoshiguma : {
                    name : "æ˜Ÿç†Š",
                    max_hp : 1602,
                    atk: 221,
                    def: 257,
                    mgc_def: 0,
                    atk_invl: 1.2,
                    type: "physic",
                    icon: "ğŸ»",
                },
                
                char_info_nightingale : {
                    name : "å¤œèº",
                    max_hp : 796,
                    atk: 132,
                    def: 80,
                    mgc_def: 5,
                    atk_invl: 2.85,
                    type: "medic",
                    icon: "ğŸ¦",
                },
                
                char_info_ifrit : {
                    name : "ä¼ŠèŠ™åˆ©ç‰¹",
                    max_hp : 687,
                    atk: 377,
                    def: 52,
                    mgc_def: 10,
                    atk_invl: 2.9,
                    type: "magic",
                    icon: "ğŸ˜ˆ",
                },
                
                char_info_silverash : {
                    name : "é“¶ç°",
                    max_hp : 1075,
                    atk: 297,
                    def: 189,
                    mgc_def: 5,
                    atk_invl: 1.3,
                    type: "physic",
                    icon: "ğŸ†",
                },
                
                
                char_info_enemy_high_def : {
                    name : "é‡è£…é˜²å¾¡ç»„é•¿",
                    max_hp : 10000,
                    atk : 600,
                    def : 1000,
                    mgc_def: 0,
                    atk_invl : 2.6,
                    type: "physic",
                    icon : "ğŸ‘¤",
                },
                
                char_info_enemy_wizard : {
                    name : "æœ¯å£«ç»„é•¿",
                    max_hp : 2400,
                    atk : 300,
                    def : 80,
                    mgc_def: 50,
                    atk_invl : 4,
                    type: "magic",
                    icon : "ğŸ§™â€ï¸ï¸",
                },
                
                dict_char_infos : {},
                
            };
            
                        
            var methods = {
                defineCharsDict : function () {
                    this.dict_char_infos = {
                        custom : this.char_info_custom,
                        eyjafjalla : this.char_info_eyjafjalla,
                        angelina : this.char_info_angelina,
                        chen : this.char_info_chen,
                        hellagur : this.char_info_hellagur,
                        schwarz : this.char_info_schwarz,
                        exusiai : this.char_info_exusiai,
                        saria : this.char_info_saria,
                        shining : this.char_info_shining,
                        skadi : this.char_info_skadi,
                        siege : this.char_info_siege,
                        hoshiguma : this.char_info_hoshiguma,
                        nightingale : this.char_info_nightingale,
                        ifrit : this.char_info_ifrit,
                        silverash : this.char_info_silverash,
                        enemy_high_def : this.char_info_enemy_high_def,
                        enemy_wizard : this.char_info_enemy_wizard,

                    };
                        
                },
                
                
                setCharData : function (tarChar, sel) {
                    this.defineCharsDict();
                    
                    console.log(`è®¾å®šä¸ºç›®æ ‡å¹²å‘˜: ${sel}`)                        
                    
                    var target_char_info = this.dict_char_infos[sel]
                    
                    // for (var key in this.info_format){
                    //     console.log(key)
                    //     console.log(`[${key}] ${tarChar.key} -> ${target_char_info.key}`)
                    //     tarChar[key] = target_char_info[key]
                    // }
                    
                    tarChar.max_hp = target_char_info.max_hp
                    
                    tarChar.name = target_char_info.name
                    tarChar.atk = target_char_info.atk
                    tarChar.def = target_char_info.def
                    tarChar.mgc_def = target_char_info.mgc_def
                    tarChar.atk_invl = target_char_info.atk_invl
                    
                    tarChar.type = target_char_info.type
                    tarChar.icon = target_char_info.icon
                    
                    
                },
                
                selectChar1 : function () {
                    this.setCharData(this.char_1, this.selected1)
                    this.max_hp_1 = this.char_1.max_hp
                    this.drawBlood('blood1', 1)
                                       
                },
                
                selectChar2 : function () {
                    this.setCharData(this.char_2, this.selected2)
                    this.max_hp_2 = this.char_2.max_hp
                    this.drawBlood('blood2', 1)
                    
                },
                
                // ç»˜åˆ¶è§’è‰²è¡€æ¡
                drawBlood : function(id, percent) {
                    var canvas = document.getElementById(id);
                    
                    if (canvas == null){
                        return false;
                    }
                    
                    var context = canvas.getContext('2d');
                    context.fillStyle = "darkred";
                    context.fillRect(0, 0, 100, 6);
                    context.fillStyle = "red";
                    context.fillRect(0, 0, percent * 100, 6);
                    
                },
                
                
                // é€šç”¨çš„è¿›æ”»å‡½æ•°,ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¿›æ”»æ–¹,ç¬¬äºŒä¸ªå‚æ•°ä¸ºå—å‡»æ–¹
                attackProcess : function(char1, char2) {
                    if (this.isBattling){
                    
                    if (char1.type == "physic"){
                        var dmg1 = char1.atk - char2.def;
                        
                        var isArmored = false;
                        
                        // æŠ›å…‰
                        if (dmg1 < char1.atk * 0.05) {
                            dmg1 = char1.atk * 0.05;
                            isArmored = true;
                        }
                        
                        // ç¡®è®¤æ˜¯å¦æ‰“åˆ°è´Ÿå€¼è¡€
                        if (char2.hp - dmg1 < 0) {
                            char2.hp = 0;
                        } else {
                            char2.hp -= dmg1;
                        }
                        
                        hp_percent = char2.hp / char2.max_hp * 100
                        
                        if (isArmored){
                            this.log += `>> ${char1.icon} <b>${char1.name}</b> æœªèƒ½å‡»ç©¿ <b>${char2.name}</b> çš„æŠ¤ç”²,ä»…ä»…é€ æˆ <i>${dmg1.toFixed(0)}</i> ç‚¹ä¿åº•ä¼¤å®³`;
                        } else {
                            this.log += `>> ${char1.icon} <b>${char1.name}</b> å±•å¼€æ”»åŠ¿,å¯¹<b>${char2.name}</b> é€ æˆäº† ${dmg1.toFixed(0)} ç‚¹ç‰©ç†ä¼¤å®³`;
                        }
                        
                        this.log += `<br>    ${char2.name} å‰©ä½™è¡€é‡: ${char2.hp.toFixed(0)} (${hp_percent.toFixed(2)}%)<br><br>`;
                        
                    }
                    
                    else if (char1.type == "magic"){
                        var dmg1 = char1.atk * (1 - (char2.mgc_def/100));
                        
                        // ç¡®è®¤æ˜¯å¦æ‰“åˆ°è´Ÿå€¼è¡€
                        if (char2.hp - dmg1 < 0) {
                            char2.hp = 0;
                        } else {
                            char2.hp -= dmg1;
                        }
                        
                        hp_percent = char2.hp / char2.max_hp * 100
                        
                        this.log += `>> ${char1.icon} <b>${char1.name}</b> æ–½å±•æºçŸ³æŠ€è‰º,å¯¹ <b>${char2.name}</b> é€ æˆäº† ${dmg1.toFixed(0)} ç‚¹æ³•æœ¯ä¼¤å®³`;
                        this.log += `<br>    ${char2.name} å‰©ä½™è¡€é‡: ${char2.hp.toFixed(0)}(${hp_percent.toFixed(2)}%) <br><br>`;
                        
                    }
                    else if (char1.type == "medic"){
                        var dmg1 = char1.atk;
                        
                        // ç¡®è®¤æ˜¯å¦å›å‡ºæ»¡è¡€
                        if (char1.hp + dmg1 > char1.max_hp) {
                            char1.hp = char1.max_hp;
                        } else {
                            char1.hp += dmg1;
                        }
                        
                        hp_percent = char1.hp / char1.max_hp * 100
                        
                        this.log += `>> ${char1.icon} <b>${char1.name}</b> å¿µåŠ¨å’’è¯­,ä¸ºè‡ªå·±æ¢å¤äº†äº† ${dmg1.toFixed(0)} ç‚¹ç”Ÿå‘½å€¼`;
                        this.log += `<br>    ${char1.name} å‰©ä½™è¡€é‡: ${char1.hp.toFixed(0)} (${hp_percent.toFixed(2)}%) <br><br>`;
                    }
                                        
                    if (char2.hp <= 0) {
                        this.log += `>> <b>${char2.name}</b> åŠ›ç«­å€’ä¸‹äº†â€¦â€¦<br><br>`;
                        this.winner = char1.name;
                        this.result = `${char1.icon} èƒœåˆ©è€…ï¼š${this.winner}`;
                        
                        this.isBattling = false;                            
                    }
                    }
                },

                
                // å·¦å‘å³è¿›æ”»
                attack1to2 : function() {
                    this.attackProcess(this.char_1, this.char_2)
                    this.drawBlood('blood1', this.char_1.hp / this.char_1.max_hp)
                    this.drawBlood('blood2', this.char_2.hp / this.char_2.max_hp)
                },
                
                // å³å‘å·¦è¿›æ”»
                attack2to1 : function() {
                    this.attackProcess(this.char_2, this.char_1)
                    this.drawBlood('blood1', this.char_1.hp / this.char_1.max_hp)
                    this.drawBlood('blood2', this.char_2.hp / this.char_2.max_hp)
                },
                    
                timerCount : function () {
                    this.timer += 0.1;
                },
                
                reset : function () {
                    this.isBattling = true;
                    this.timer = 0;
                        
                    this.drawBlood('blood1', 1)
                    this.drawBlood('blood2', 1)
                    
                    this.char_1.hp = this.char_1.max_hp;
                    this.char_2.hp = this.char_2.max_hp;
                    
                    this.result = "æ•¬è¯·æœŸå¾…ç»“æœâ€¦â€¦"
                    
                },
            
                startBattle: function () {
                    this.reset()
                    
                    this.log = "[å¼€å§‹æˆ˜æ–—ï¼]<br>";              
                    
                    // è®¡æ—¶å™¨
                    var intervalCount = setInterval( () => {
                        
                        this.timerCount();
                        
                        if (this.isBattling == false) {
                            clearInterval(intervalCount);
                        };
                        
                    }, 100);
                    
                    // å…ˆäº’ç ä¸€åˆ€
                    this.attack1to2();
                    this.attack2to1();
                    
                    // å‰è€…çš„æ”»å‡»è®¡ç®—
                    var interval1 = setInterval( () => {
                        
                        this.attack1to2();
                        
                        if (this.isBattling == false) {
                            clearInterval(interval1);
                        }
                        
                    }, this.char_1.atk_invl * 1000);
                    
                    
                    // åè€…çš„æ”»å‡»è®¡ç®—
                    var interval2 = setInterval( () => {
                        
                        this.attack2to1()
                        
                        if (this.isBattling == false) {
                            clearInterval(interval2);
                        }
                        
                    }, this.char_2.atk_invl * 1000);
                    
                }
            };
                        
            var vm = new Vue({
                el: '#app',
                data: data,
                methods: methods,
                watch : {
                    // å¦‚æœæœ€å¤§è¡€é‡æ”¹ç¼–,åˆ™è¿è¡Œè¿™ä¸ªå‡½æ•°
                    max_hp_1 : function (newValue) {
                        this.char_1.max_hp = newValue;
                        this.char_1.hp = this.char_1.max_hp;
                    },
                    
                    max_hp_2 : function (newValue) {
                        this.char_2.max_hp = newValue;
                        this.char_2.hp = this.char_2.max_hp;
                    }
                },
                filters: {
                  rounding0 (value) {
                    return value.toFixed(0)
                  },
                  rounding1 (value) {
                    return value.toFixed(1)
                  },
                },
            });
            
            
        </script>
	</body>

</html>
